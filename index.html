<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Escape Allende 29</title>
    <meta
      name="description"
      content="Escape room móvil para celebrar el cumpleaños 29 de Allende"
    />
    <meta name="theme-color" content="#3b0f28" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Allende29" />
    <link rel="manifest" href="manifest.webmanifest" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%20128%20128%27%3E%3Crect%20width%3D%27128%27%20height%3D%27128%27%20rx%3D%2726%27%20fill%3D%27%233b0f28%27/%3E%3Cpath%20d%3D%27M64%2098c-1.6%200-3.3-.5-4.7-1.5-16.2-12-26.9-21.2-33-29-5.8-7.5-8.3-14.1-8.3-21.8C18%2032.9%2028.3%2024%2040.9%2024c8.5%200%2015%203.8%2019.1%2010.8C64.1%2027.8%2070.6%2024%2079.1%2024%2091.7%2024%20102%2032.9%20102%2046.7c0%207.7-2.5%2014.3-8.3%2021.8-6.2%207.8-16.8%2017-33%2029-1.4%201-3.1%201.5-4.7%201.5z%27%20fill%3D%27%23f5c16c%27/%3E%3Cpath%20d%3D%27M50.8%2070.5h6.2l3.1-13.4%203.6%2023.8%204.3-18.3%202.8%207.9h6.4%27%20fill%3D%27none%27%20stroke%3D%27%23fcead0%27%20stroke-width%3D%275%27%20stroke-linecap%3D%27round%27%20stroke-linejoin%3D%27round%27/%3E%3C/svg%3E"
    />
    <link
      rel="apple-touch-icon"
      href="data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%20512%20512%27%3E%3Crect%20width%3D%27512%27%20height%3D%27512%27%20rx%3D%27108%27%20fill%3D%27%233b0f28%27/%3E%3Cpath%20d%3D%27M256%20392c-6.4%200-13.2-2-18.8-6-64.8-48-107.6-84.8-132-116-23.2-30-33.2-56.4-33.2-87.2C72%20131.6%20113.2%2096%20163.6%2096c34%200%2060%2015.2%2076.4%2043.2C256.4%20111.2%20282.4%2096%20316.4%2096c50.4%200%2091.6%2035.6%2091.6%2086.8%200%2030.8-10%2057.2-33.2%2087.2-24.8%2031.2-67.2%2068-132%20116-5.6%204-12.4%206-18.8%206z%27%20fill%3D%27%23f5c16c%27/%3E%3Cpath%20d%3D%27M203.2%20282h24.8l12.4-53.6%2014.4%2095.2%2017.2-73.2%2011.2%2031.6h25.6%27%20fill%3D%27none%27%20stroke%3D%27%23fcead0%27%20stroke-width%3D%2720%27%20stroke-linecap%3D%27round%27%20stroke-linejoin%3D%27round%27/%3E%3C/svg%3E"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@500;600;700&family=Nunito:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <script defer src="app.js"></script>
  </head>
  <body>
    <div id="startScreen" class="screen screen--intro">
      <div class="screen__card">
        <p class="tag">🎉 Feliz vuelta al sol #29</p>
        <h1>Escape Room de Allende</h1>
        <p>
          Esta aventura móvil mezcla Hello Kitty, viajes soñados y cafés de
          Starbucks. Instálala en tu pantalla de inicio y pulsa el botón cuando
          quieras entrar a la habitación sorpresa.
        </p>
        <button id="startGame" class="btn btn--primary">Entrar a la habitación</button>
        <p class="hint">Tip: cada objeto esconde un número. Necesitarás los tres para abrir el cofre.</p>
      </div>
    </div>

    <main id="game" class="game hidden" aria-hidden="true">
      <header class="hud">
        <div class="hud__title">
          <h1>Habitación sorpresa de Allende</h1>
          <p>Explora y pulsa los elementos para resolver los retos.</p>
        </div>
        <ul id="progressTracker" class="hud__progress" aria-label="Progreso de acertijos">
          <li class="hud__progress-step active" data-step="kitty">Lazo</li>
          <li class="hud__progress-step" data-step="travel">Ventana</li>
          <li class="hud__progress-step" data-step="drink">Barista</li>
          <li class="hud__progress-step" data-step="final">Cofre</li>
        </ul>
      </header>

      <section class="room-wrapper">
        <div class="room-scene" role="region" aria-label="Habitación interactiva con objetos sorpresa">
          <button
            class="room-object room-object--kitty"
            data-target="modal-kitty"
            aria-label="Investigar el tocador con lazo de Hello Kitty"
          >
            🎀
          </button>
          <button
            class="room-object room-object--travel"
            data-target="modal-travel"
            data-requires="kitty"
            aria-label="Mirar por la ventana con maletas viajeras"
          >
            ✈️
          </button>
          <button
            class="room-object room-object--drink"
            data-target="modal-drink"
            data-requires="kitty,travel"
            aria-label="Examinar la mesa de barista y preparar un café"
          >
            ☕
          </button>
          <button
            class="room-object room-object--final"
            data-target="modal-final"
            data-requires="kitty,travel,drink"
            aria-label="Abrir el cofre final"
          >
            🔒
          </button>
        </div>
      </section>
    </main>

    <div id="toast" class="toast hidden" role="status" aria-live="polite"></div>

    <section id="modal-kitty" class="modal hidden" aria-hidden="true">
      <div class="modal__overlay" data-close></div>
      <div class="modal__content" role="dialog" aria-modal="true" aria-labelledby="kitty-title">
        <button class="modal__close" type="button" data-close aria-label="Cerrar reto">×</button>
        <h2 id="kitty-title">Reto del tocador · Lazo secreto</h2>
        <p>
          Hello Kitty dejó stickers para formar su nombre. Pulsa en orden para
          escribir la palabra correcta y descubre el primer número mágico.
        </p>
        <div class="stickers" role="group" aria-label="Stickers de Hello Kitty">
          <button class="kitty-sticker" data-letter="K" aria-label="Letra K">🌸 K</button>
          <button class="kitty-sticker" data-letter="T" aria-label="Letra T">🎀 T</button>
          <button class="kitty-sticker" data-letter="I" aria-label="Letra I">😺 I</button>
          <button class="kitty-sticker" data-letter="Y" aria-label="Letra Y">🍓 Y</button>
          <button class="kitty-sticker" data-letter="T" aria-label="Letra T">💌 T</button>
        </div>
        <div class="kitty-output">
          <span id="kittyDisplay" aria-live="polite" aria-atomic="true"></span>
          <button id="kittyReset" class="btn btn--ghost">Reiniciar</button>
        </div>
        <p id="kittyMessage" class="message" role="status"></p>
      </div>
    </section>

    <section id="modal-travel" class="modal hidden" aria-hidden="true">
      <div class="modal__overlay" data-close></div>
      <div class="modal__content" role="dialog" aria-modal="true" aria-labelledby="travel-title">
        <button class="modal__close" type="button" data-close aria-label="Cerrar reto">×</button>
        <h2 id="travel-title">Reto de la ventana · Postales viajeras</h2>
        <p>
          Desde la ventana se ven tres destinos. Pulsa la postal que cumpla todas
          las pistas: hogar de Hello Kitty, luces brillantes por la noche y lugar
          perfecto para festejar.
        </p>
        <div class="destinations" role="list">
          <button class="destination-card" data-key="paris">
            <span class="destination-card__emoji">🗼</span>
            <span class="destination-card__name">París</span>
            <p>Romance y croissants, pero no es el origen de Sanrio.</p>
          </button>
          <button class="destination-card" data-key="tokyo">
            <span class="destination-card__emoji">🗻</span>
            <span class="destination-card__name">Tokio</span>
            <p>Luces vibrantes, cultura pop y hogar de Hello Kitty.</p>
          </button>
          <button class="destination-card" data-key="seattle">
            <span class="destination-card__emoji">🌲</span>
            <span class="destination-card__name">Seattle</span>
            <p>Cuna de cierto café famoso, pero no es la pista correcta.</p>
          </button>
        </div>
        <p id="travelMessage" class="message" role="status"></p>
      </div>
    </section>

    <section id="modal-drink" class="modal hidden" aria-hidden="true">
      <div class="modal__overlay" data-close></div>
      <div class="modal__content" role="dialog" aria-modal="true" aria-labelledby="drink-title">
        <button class="modal__close" type="button" data-close aria-label="Cerrar reto">×</button>
        <h2 id="drink-title">Reto del barista · Caramel Macchiato</h2>
        <p>
          Para brindar por los 29, prepara el latte favorito de Allende. Marca los
          ingredientes correctos para un <em>Caramel Macchiato</em> y pulsa
          "Servir".
        </p>
        <form id="drinkForm" class="drink-form">
          <fieldset>
            <legend>Elige tus ingredientes</legend>
            <label class="pill">
              <input type="checkbox" name="ingredient" value="espresso" />
              <span>Espresso</span>
            </label>
            <label class="pill">
              <input type="checkbox" name="ingredient" value="leche" />
              <span>Leche vaporizada</span>
            </label>
            <label class="pill">
              <input type="checkbox" name="ingredient" value="caramelo" />
              <span>Jarabe de caramelo</span>
            </label>
            <label class="pill">
              <input type="checkbox" name="ingredient" value="crema" />
              <span>Crema batida</span>
            </label>
            <label class="pill">
              <input type="checkbox" name="ingredient" value="matcha" />
              <span>Matcha</span>
            </label>
            <label class="pill">
              <input type="checkbox" name="ingredient" value="chocolate" />
              <span>Chocolate</span>
            </label>
            <label class="pill">
              <input type="checkbox" name="ingredient" value="hielo" />
              <span>Hielo</span>
            </label>
          </fieldset>
          <button type="submit" class="btn btn--primary">Servir bebida</button>
        </form>
        <p id="drinkMessage" class="message" role="status"></p>
      </div>
    </section>

    <section id="modal-final" class="modal hidden" aria-hidden="true">
      <div class="modal__overlay" data-close></div>
      <div class="modal__content" role="dialog" aria-modal="true" aria-labelledby="final-title">
        <button class="modal__close" type="button" data-close aria-label="Cerrar reto">×</button>
        <h2 id="final-title">Cofre de aniversario · Código 29</h2>
        <p>
          Usa los tres números mágicos obtenidos en la habitación y ordénalos en
          el mismo orden en que resolviste los retos.
        </p>
        <form id="finalForm" class="final-form">
          <label for="finalCode">Introduce el código secreto</label>
          <input
            id="finalCode"
            name="finalCode"
            type="tel"
            inputmode="numeric"
            maxlength="3"
            autocomplete="one-time-code"
            placeholder="_ _ _"
            required
          />
          <button type="submit" class="btn btn--secondary">Desbloquear</button>
        </form>
        <p id="finalMessage" class="message" role="status"></p>
      </div>
    </section>

    <section id="modal-celebration" class="modal hidden" aria-hidden="true">
      <div class="modal__overlay" data-close></div>
      <div class="modal__content celebration" role="dialog" aria-modal="true" aria-labelledby="celebration-title">
        <button class="modal__close" type="button" data-close aria-label="Cerrar mensaje">×</button>
        <h2 id="celebration-title">🎀 ¡Sorpresa desbloqueada!</h2>
        <p>
          Allende, completaste la misión con estilo. Este cofre guarda las pistas
          para seguir celebrando juntos todo el año.
        </p>
        <ul class="celebration__perks">
          <li>✨ Pase dorado para maratón de Hello Kitty + helado</li>
          <li>🧳 Viaje sorpresa planeado a tu ritmo (destino secreto)</li>
          <li>☕ Cafés Starbucks personalizados durante todo el mes</li>
        </ul>
        <p class="celebration__note">
          Guarda la app en la pantalla de inicio y vuelve cuando necesites un
          recordatorio de lo mucho que te amo. ¡Feliz cumpleaños 29!
        </p>
      </div>
    </section>
  </body>
</html>
