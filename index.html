<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Habitaci√≥n 29 ¬∑ Escape Room</title>
    <meta
      name="description"
      content="Explora una habitaci√≥n interactiva tocando cada rinc√≥n para descubrir los c√≥digos secretos del escape room."
    />
    <meta name="theme-color" content="#201637" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Habitaci√≥n 29" />
    <link rel="manifest" href="manifest.webmanifest" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%20128%20128%27%3E%3Crect%20width%3D%27128%27%20height%3D%27128%27%20rx%3D%2726%27%20fill%3D%27%23201637%27/%3E%3Cpath%20d%3D%27M64%2098c-1.6%200-3.2-.5-4.5-1.5-15.4-11.4-25.5-20.3-31.2-27.7-5.4-7-7.8-13.2-7.8-20.4C20.5%2034.6%2030%2026.2%2041.8%2026.2c8%200%2014.2%203.5%2018%209.9%203.8-6.4%2010-9.9%2018-9.9C89.6%2026.2%2099%2034.6%2099%2048.4c0%207.3-2.4%2013.5-7.8%2020.4-5.7%207.4-15.9%2016.3-31.2%2027.7-1.3%201-2.9%201.5-4.5%201.5z%27%20fill%3D%27%23f7d27d%27/%3E%3Cpath%20d%3D%27M50%2070h6l3-13%203.4%2023%204.2-17.6%202.7%207.6h6.2%27%20fill%3D%27none%27%20stroke%3D%27%23fff3d6%27%20stroke-width%3D%275%27%20stroke-linecap%3D%27round%27%20stroke-linejoin%3D%27round%27/%3E%3C/svg%3E"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@500;700&family=Nunito:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <script defer src="app.js"></script>
  </head>
  <body>
    <div class="intro-screen" id="introScreen">
      <div class="intro-screen__content">
        <p class="intro-screen__tag">Escape room t√°ctil</p>
        <h1>Habitaci√≥n 29</h1>
        <p>
          Est√°s dentro del refugio secreto de Allende. Todo parece quieto, pero cada
          objeto guarda un n√∫mero. Encu√©ntralos y podr√°s salir a celebrar.
        </p>
        <button id="enterRoom" class="btn btn--primary">Entrar en la habitaci√≥n</button>
        <p class="intro-screen__hint">Toca cualquier rinc√≥n que parezca sospechoso.</p>
      </div>
    </div>

    <main id="game" class="game" aria-hidden="true" data-started="false">
      <aside class="hud" aria-label="Panel de progreso">
        <h2>Progreso</h2>
        <ul id="clueList" class="clue-list">
          <li data-clue="diary">
            <span class="clue-list__icon" aria-hidden="true">üìì</span>
            <span class="clue-list__name">Cuaderno de viaje</span>
            <span class="clue-list__number" data-number="diary">_</span>
          </li>
          <li data-clue="chest">
            <span class="clue-list__icon" aria-hidden="true">üß≥</span>
            <span class="clue-list__name">Ba√∫l secreto</span>
            <span class="clue-list__number" data-number="chest">_</span>
          </li>
          <li data-clue="window">
            <span class="clue-list__icon" aria-hidden="true">üåÜ</span>
            <span class="clue-list__name">Ventana nocturna</span>
            <span class="clue-list__number" data-number="window">_</span>
          </li>
          <li data-clue="bookshelf">
            <span class="clue-list__icon" aria-hidden="true">üìö</span>
            <span class="clue-list__name">Estanter√≠a oculta</span>
            <span class="clue-list__number" data-number="bookshelf">_</span>
          </li>
          <li data-clue="archive">
            <span class="clue-list__icon" aria-hidden="true">üóÉÔ∏è</span>
            <span class="clue-list__name">Archivo clasificado</span>
            <span class="clue-list__number" data-number="archive">_</span>
          </li>
          <li data-clue="laboratory">
            <span class="clue-list__icon" aria-hidden="true">üß™</span>
            <span class="clue-list__name">Laboratorio lum√≠nico</span>
            <span class="clue-list__number" data-number="laboratory">_</span>
          </li>
          <li data-clue="observatory">
            <span class="clue-list__icon" aria-hidden="true">üî≠</span>
            <span class="clue-list__name">Planetario privado</span>
            <span class="clue-list__number" data-number="observatory">_</span>
          </li>
          <li data-clue="radio">
            <span class="clue-list__icon" aria-hidden="true">üìª</span>
            <span class="clue-list__name">Cabina de radio</span>
            <span class="clue-list__number" data-number="radio">_</span>
          </li>
          <li data-clue="greenhouse">
            <span class="clue-list__icon" aria-hidden="true">üåø</span>
            <span class="clue-list__name">Invernadero violeta</span>
            <span class="clue-list__number" data-number="greenhouse">_</span>
          </li>
          <li data-clue="musicbox">
            <span class="clue-list__icon" aria-hidden="true">üé∂</span>
            <span class="clue-list__name">Caja musical</span>
            <span class="clue-list__number" data-number="musicbox">_</span>
          </li>
        </ul>
        <div class="hud__code" aria-live="polite">
          C√≥digo final:
          <span data-slot="0">_</span>
          <span data-slot="1">_</span>
          <span data-slot="2">_</span>
          <span data-slot="3">_</span>
          <span data-slot="4">_</span>
          <span data-slot="5">_</span>
          <span data-slot="6">_</span>
          <span data-slot="7">_</span>
          <span data-slot="8">_</span>
          <span data-slot="9">_</span>
        </div>
        <div class="hud__notes">
          <h3>Notas</h3>
          <p id="hudNote">Necesitas encontrar diez n√∫meros antes de abrir la puerta.</p>
        </div>
      </aside>

      <section class="room" id="roomStage" aria-label="Habitaci√≥n de escape" data-room="estudio">
        <div class="room__backdrop" role="presentation"></div>
        <button
          type="button"
          class="hotspot hotspot--desk"
          data-target="diary"
          data-room="estudio"
          aria-label="Revisar el cuaderno sobre el escritorio"
        >
          Cuaderno
        </button>
        <button
          type="button"
          class="hotspot hotspot--explore hotspot--explore-estudio"
          data-target="explore-estudio"
          data-room="estudio"
          aria-label="Observar los rincones del estudio"
        >
          Rincones
        </button>
        <button
          type="button"
          class="hotspot hotspot--chest"
          data-target="chest"
          data-room="vestidor"
          aria-label="Abrir el ba√∫l junto a la cama"
        >
          Ba√∫l
        </button>
        <button
          type="button"
          class="hotspot hotspot--explore hotspot--explore-vestidor"
          data-target="explore-vestidor"
          data-room="vestidor"
          aria-label="Recorrer los detalles del vestidor"
        >
          Rincones
        </button>
        <button
          type="button"
          class="hotspot hotspot--window"
          data-target="window"
          data-room="mirador"
          aria-label="Mirar por la ventana"
        >
          Ventana
        </button>
        <button
          type="button"
          class="hotspot hotspot--explore hotspot--explore-mirador"
          data-target="explore-mirador"
          data-room="mirador"
          aria-label="Explorar los balcones del mirador"
        >
          Rincones
        </button>
        <button
          type="button"
          class="hotspot hotspot--door"
          data-target="door"
          data-room="lounge"
          aria-label="Intentar abrir la puerta"
        >
          Puerta
        </button>
        <button
          type="button"
          class="hotspot hotspot--map"
          data-target="map"
          aria-label="Abrir el mapa hologr√°fico de habitaciones"
        >
          Mapa
        </button>
        <button
          type="button"
          class="hotspot hotspot--hall"
          data-target="gallery"
          data-room="estudio"
          aria-label="Cruzar el pasillo lateral"
        >
          Pasillo
        </button>
        <button
          type="button"
          class="hotspot hotspot--terrace"
          data-target="terrace"
          data-room="vestidor"
          aria-label="Subir al mirador"
        >
          Mirador
        </button>
        <button
          type="button"
          class="hotspot hotspot--library"
          data-target="library"
          data-room="mirador"
          aria-label="Abrir la puerta de la biblioteca"
        >
          Biblioteca
        </button>
        <button
          type="button"
          class="hotspot hotspot--books"
          data-target="bookshelf"
          data-room="biblioteca"
          aria-label="Examinar la estanter√≠a secreta"
        >
          Estanter√≠a
        </button>
        <button
          type="button"
          class="hotspot hotspot--explore hotspot--explore-biblioteca"
          data-target="explore-biblioteca"
          data-room="biblioteca"
          aria-label="Explorar las mesas de lectura"
        >
          Rincones
        </button>
        <button
          type="button"
          class="hotspot hotspot--archives"
          data-target="archives"
          data-room="biblioteca"
          aria-label="Avanzar al archivo clasificado"
        >
          Archivo
        </button>
        <button
          type="button"
          class="hotspot hotspot--folders"
          data-target="archive"
          data-room="archivo"
          aria-label="Revisar las carpetas selladas"
        >
          Carpetas
        </button>
        <button
          type="button"
          class="hotspot hotspot--explore hotspot--explore-archivo"
          data-target="explore-archivo"
          data-room="archivo"
          aria-label="Inspeccionar los anaqueles del archivo"
        >
          Rincones
        </button>
        <button
          type="button"
          class="hotspot hotspot--labgate"
          data-target="labgate"
          data-room="archivo"
          aria-label="Abrir el laboratorio lum√≠nico"
        >
          Laboratorio
        </button>
        <button
          type="button"
          class="hotspot hotspot--labmix"
          data-target="laboratory"
          data-room="laboratorio"
          aria-label="Ajustar las mezclas de luz"
        >
          Mezclas
        </button>
        <button
          type="button"
          class="hotspot hotspot--explore hotspot--explore-laboratorio"
          data-target="explore-laboratorio"
          data-room="laboratorio"
          aria-label="Revisar aparatos experimentales"
        >
          Rincones
        </button>
        <button
          type="button"
          class="hotspot hotspot--observatory"
          data-target="observatoryGate"
          data-room="laboratorio"
          aria-label="Subir al planetario"
        >
          Planetario
        </button>
        <button
          type="button"
          class="hotspot hotspot--projector"
          data-target="observatory"
          data-room="observatorio"
          aria-label="Encender el proyector estelar"
        >
          Proyector
        </button>
        <button
          type="button"
          class="hotspot hotspot--explore hotspot--explore-observatorio"
          data-target="explore-observatorio"
          data-room="observatorio"
          aria-label="Examinar el domo estelar"
        >
          Rincones
        </button>
        <button
          type="button"
          class="hotspot hotspot--radiohall"
          data-target="radioGate"
          data-room="observatorio"
          aria-label="Descender a la cabina de radio"
        >
          Cabina
        </button>
        <button
          type="button"
          class="hotspot hotspot--radiodial"
          data-target="radio"
          data-room="radio"
          aria-label="Sintonizar la frecuencia secreta"
        >
          Frecuencia
        </button>
        <button
          type="button"
          class="hotspot hotspot--explore hotspot--explore-radio"
          data-target="explore-radio"
          data-room="radio"
          aria-label="Explorar los paneles de la cabina"
        >
          Rincones
        </button>
        <button
          type="button"
          class="hotspot hotspot--greenhousegate"
          data-target="greenhouseGate"
          data-room="radio"
          aria-label="Abrir el invernadero"
        >
          Invernadero
        </button>
        <button
          type="button"
          class="hotspot hotspot--garden"
          data-target="greenhouse"
          data-room="greenhouse"
          aria-label="Ajustar los reguladores del invernadero"
        >
          Reguladores
        </button>
        <button
          type="button"
          class="hotspot hotspot--explore hotspot--explore-greenhouse"
          data-target="explore-greenhouse"
          data-room="greenhouse"
          aria-label="Recorrer las pasarelas del invernadero"
        >
          Rincones
        </button>
        <button
          type="button"
          class="hotspot hotspot--lounge"
          data-target="loungeGate"
          data-room="greenhouse"
          aria-label="Entrar al sal√≥n final"
        >
          Sal√≥n
        </button>
        <button
          type="button"
          class="hotspot hotspot--musicbox"
          data-target="musicbox"
          data-room="lounge"
          aria-label="Activar la caja musical"
        >
          Caja musical
        </button>
        <button
          type="button"
          class="hotspot hotspot--explore hotspot--explore-lounge"
          data-target="explore-lounge"
          data-room="lounge"
          aria-label="Descubrir los rincones del sal√≥n"
        >
          Rincones
        </button>
      </section>
    </main>

    <section
      id="modal-diary"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="diaryTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="diaryTitle">Cuaderno de viaje</h2>
        <p>
          Las p√°ginas destellan con adhesivos fluorescentes y boletos perfumados. Una nota dice:
          <em>"Mi primer destino siempre guarda la llave del resto"</em>.
        </p>
        <form id="diaryForm" class="option-list">
          <fieldset>
            <legend>¬øQu√© lugar abri√≥ todas las aventuras?</legend>
            <label>
              <input type="radio" name="diaryAnswer" value="paris" />
              Par√≠s con su torre iluminada.
            </label>
            <label>
              <input type="radio" name="diaryAnswer" value="tokio" />
              Tokio y sus neones interminables.
            </label>
            <label>
              <input type="radio" name="diaryAnswer" value="ny" />
              Nueva York desde lo alto del Empire.
            </label>
          </fieldset>
          <button type="submit" class="btn btn--secondary">Desbloquear nota</button>
        </form>
        <p id="diaryFeedback" class="modal__feedback" role="status"></p>
      </article>
    </section>

    <section
      id="modal-explore-estudio"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="exploreEstudioTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="exploreEstudioTitle">Rincones del estudio</h2>
        <p>
          Las paredes respiran ne√≥n y el reloj del refugio avanza sin hacer ruido. Cada objeto conserva
          una chispa de las aventuras pasadas de Allende.
        </p>
        <div class="ambient-explore" data-ambient-group>
          <div class="ambient-options">
            <button
              type="button"
              class="ambient-option"
              data-description="El escritorio exhibe mapas de vuelo doblados y fotograf√≠as polaroid que marcan aterrizajes improvisados. Un cup√≥n arrugado conserva la tinta del primer viaje."
            >
              Escritorio de planos
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="El mural de rutas une continentes con hilos fluorescentes. Al tocarlos, un cosquilleo el√©ctrico recorre los dedos como si cada hilo fuera una corriente a√©rea."
            >
              Mural de rutas
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="El fon√≥grafo custodia vinilos rayados. Gira sin aguja y murmura risas lejanas mezcladas con aplausos en miniatura. Parece esperar el c√≥digo correcto para volver a sonar."
            >
              Fon√≥grafo centinela
            </button>
          </div>
          <p
            class="modal__ambient"
            data-ambient-output
            data-default="Elige un punto del estudio para inspeccionarlo."
          >
            Elige un punto del estudio para inspeccionarlo.
          </p>
        </div>
      </article>
    </section>

    <section
      id="modal-chest"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="chestTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="chestTitle">Ba√∫l secreto</h2>
        <p>
          Dentro hay compartimentos magn√©ticos que chispean como estrellas. El mensaje dice:
          <em>"Activa la secuencia favorita de Allende"</em>.
        </p>
        <div class="sequence" role="group" aria-label="Selecciona la secuencia correcta">
          <button type="button" class="sequence__token" data-symbol="cat">üê±</button>
          <button type="button" class="sequence__token" data-symbol="plane">‚úàÔ∏è</button>
          <button type="button" class="sequence__token" data-symbol="coffee">‚òï</button>
          <button type="button" class="sequence__token" data-symbol="camera">üì∑</button>
        </div>
        <p class="sequence__hint">Pulsa los tres iconos en orden. Puedes reiniciar cuando quieras.</p>
        <div class="sequence__controls">
          <span id="sequenceProgress" aria-live="polite">Orden actual: ‚Äî</span>
          <button type="button" id="sequenceReset" class="btn btn--ghost">Reiniciar</button>
        </div>
        <p id="chestFeedback" class="modal__feedback" role="status"></p>
      </article>
    </section>

    <section
      id="modal-explore-vestidor"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="exploreVestidorTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="exploreVestidorTitle">Brillos del vestidor</h2>
        <p>
          Los espejos multiplican destellos fucsias y el suelo guarda huellas de bailes clandestinos.
          El vestidor es un manifiesto port√°til de viajes improvisados.
        </p>
        <div class="ambient-explore" data-ambient-group>
          <div class="ambient-options">
            <button
              type="button"
              class="ambient-option"
              data-description="El espejo infinito proyecta versiones de ti sosteniendo maletas selladas. Cada reflejo susurra un destino distinto, esperando la contrase√±a correcta."
            >
              Espejo infinito
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="El perchero luce m√°scaras luminiscentes, cada una marcada con c√≥digos binarios bordados en la tela. Al moverlas tintinean como si anunciaran una funci√≥n secreta."
            >
              Perchero codificado
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="Un caj√≥n transparente contiene pulseras de luz que a√∫n conservan calor. Se activan al tacto dejando un rastro chisporroteante en el aire."
            >
              Caj√≥n de luces
            </button>
          </div>
          <p
            class="modal__ambient"
            data-ambient-output
            data-default="Elige una pieza del vestidor para examinarla."
          >
            Elige una pieza del vestidor para examinarla.
          </p>
        </div>
      </article>
    </section>

    <section
      id="modal-gallery"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="galleryTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="galleryTitle">Pasillo lateral</h2>
        <p>
          El panel corredizo exhala vapor azul y deja entrever destellos fucsias del vestidor.
          Cruza cuando quieras que el estudio respire aire de aventura.
        </p>
        <p id="galleryStatus" class="modal__status" role="status">
          El pasillo aguarda entre penumbras, listo para abrirse en cuanto decidas abandonar el
          escritorio.
        </p>
        <button type="button" class="btn btn--secondary" data-travel="gallery" disabled>
          Entrar al vestidor
        </button>
      </article>
    </section>

    <section
      id="modal-map"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="mapTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content modal__content--wide">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="mapTitle">Mapa hologr√°fico</h2>
        <p>
          Las rutas del refugio aparecen suspendidas en el aire. Selecciona una habitaci√≥n desbloqueada
          para viajar de inmediato y seguir explorando pistas.
        </p>
        <ul class="map-list">
          <li class="map-list__item">
            <div class="map-list__header">
              <button
                type="button"
                class="map-list__button"
                data-room-target="estudio"
                data-requirement=""
                data-note="Regresas al estudio donde el cuaderno y los mapas te esperan encendidos."
              >
                Estudio del navegante
              </button>
              <span
                class="map-list__status"
                data-room-status="estudio"
                data-locked="El punto de partida siempre est√° disponible."
              ></span>
            </div>
            <p class="map-list__description">
              Centro de operaciones repleto de mapas, fotograf√≠as y el cuaderno de viaje.
            </p>
          </li>
          <li class="map-list__item">
            <div class="map-list__header">
              <button
                type="button"
                class="map-list__button"
                data-room-target="vestidor"
                data-requirement="gallery"
                data-note="Te deslizas al vestidor ne√≥n y las maletas vuelven a brillar."
              >
                Vestidor ne√≥n
              </button>
              <span
                class="map-list__status"
                data-room-status="vestidor"
                data-locked="Activa el pasillo lateral desde el estudio para acceder."
              ></span>
            </div>
            <p class="map-list__description">
              Maletas abiertas, luces fucsias y un ba√∫l magn√©tico lleno de secretos.
            </p>
          </li>
          <li class="map-list__item">
            <div class="map-list__header">
              <button
                type="button"
                class="map-list__button"
                data-room-target="mirador"
                data-requirement="terrace"
                data-note="Corres hacia el mirador nocturno y sientes el viento encender la m√∫sica."
              >
                Mirador nocturno
              </button>
              <span
                class="map-list__status"
                data-room-status="mirador"
                data-locked="Necesitas activar la escalera luminosa desde el vestidor."
              ></span>
            </div>
            <p class="map-list__description">
              Terraza elevada con persianas inteligentes y reflejos que ocultan pistas.
            </p>
          </li>
          <li class="map-list__item">
            <div class="map-list__header">
              <button
                type="button"
                class="map-list__button"
                data-room-target="biblioteca"
                data-requirement="library"
                data-note="Te deslizas entre anaqueles dorados listos para revelar la palabra clave."
              >
                Biblioteca secreta
              </button>
              <span
                class="map-list__status"
                data-room-status="biblioteca"
                data-locked="Alinea el reflejo nocturno para desbloquear la biblioteca."
              ></span>
            </div>
            <p class="map-list__description">
              Estanter√≠as brillantes, vitrinas enigm√°ticas y letras que vibran con luz.
            </p>
          </li>
          <li class="map-list__item">
            <div class="map-list__header">
              <button
                type="button"
                class="map-list__button"
                data-room-target="archivo"
                data-requirement="archives"
                data-note="Te sumerges otra vez en el archivo blindado y sus expedientes crom√°ticos."
              >
                Archivo blindado
              </button>
              <span
                class="map-list__status"
                data-room-status="archivo"
                data-locked="Descifra la palabra de la biblioteca para abrir el archivo."
              ></span>
            </div>
            <p class="map-list__description">
              Expedientes sellados, tubos neum√°ticos y sellos que brillan al ritmo de la m√∫sica.
            </p>
          </li>
          <li class="map-list__item">
            <div class="map-list__header">
              <button
                type="button"
                class="map-list__button"
                data-room-target="laboratorio"
                data-requirement="labgate"
                data-note="Vuelves al laboratorio para ajustar mezclas fluorescentes con precisi√≥n."
              >
                Laboratorio lum√≠nico
              </button>
              <span
                class="map-list__status"
                data-room-status="laboratorio"
                data-locked="Selecciona los sellos correctos para alimentar el laboratorio."
              ></span>
            </div>
            <p class="map-list__description">
              Reactivos brillantes, osciloscopios y una temperatura que decide el avance.
            </p>
          </li>
          <li class="map-list__item">
            <div class="map-list__header">
              <button
                type="button"
                class="map-list__button"
                data-room-target="observatorio"
                data-requirement="observatoryGate"
                data-note="Subes al observatorio privado donde las constelaciones obedecen tus se√±ales."
              >
                Observatorio privado
              </button>
              <span
                class="map-list__status"
                data-room-status="observatorio"
                data-locked="Estabiliza la mezcla del laboratorio para liberar el domo."
              ></span>
            </div>
            <p class="map-list__description">
              Domo estelar, prismas giratorios y constelaciones que transmiten mensajes.
            </p>
          </li>
          <li class="map-list__item">
            <div class="map-list__header">
              <button
                type="button"
                class="map-list__button"
                data-room-target="radio"
                data-requirement="radioGate"
                data-note="Desciendes hacia la cabina y el dial vuelve a buscar la frecuencia clandestina."
              >
                Cabina de radio
              </button>
              <span
                class="map-list__status"
                data-room-status="radio"
                data-locked="Necesitas proyectar el cometa correcto para abrir la cabina."
              ></span>
            </div>
            <p class="map-list__description">
              Paneles sonoros, antenas en espiral y cuadernos de locuci√≥n iluminados.
            </p>
          </li>
          <li class="map-list__item">
            <div class="map-list__header">
              <button
                type="button"
                class="map-list__button"
                data-room-target="greenhouse"
                data-requirement="greenhouseGate"
                data-note="Vuelves al invernadero donde el clima violeta respira junto a ti."
              >
                Invernadero violeta
              </button>
              <span
                class="map-list__status"
                data-room-status="greenhouse"
                data-locked="Sintoniza la frecuencia secreta para abrir el invernadero."
              ></span>
            </div>
            <p class="map-list__description">
              Pasarelas tibias, vapor arom√°tico y sensores atentos a cada ajuste.
            </p>
          </li>
          <li class="map-list__item">
            <div class="map-list__header">
              <button
                type="button"
                class="map-list__button"
                data-room-target="lounge"
                data-requirement="loungeGate"
                data-note="El sal√≥n del festejo se ilumina al sentir tus pasos en direcci√≥n a la salida."
              >
                Sal√≥n del festejo
              </button>
              <span
                class="map-list__status"
                data-room-status="lounge"
                data-locked="Equilibra el clima del invernadero para abrir el sal√≥n."
              ></span>
            </div>
            <p class="map-list__description">
              Luces c√°lidas, mesas preparadas y una puerta final esperando el c√≥digo completo.
            </p>
          </li>
        </ul>
      </article>
    </section>

    <section
      id="modal-terrace"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="terraceTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="terraceTitle">Escalera al mirador</h2>
        <p>
          Una escalera de luz serpentea hacia el mirador. El sensor aguarda la pista del cuaderno o
          el latido magn√©tico del ba√∫l antes de permitir el ascenso.
        </p>
        <p id="terraceStatus" class="modal__status" role="status">
          Resuelve el cuaderno o activa la secuencia favorita para que la escalera cobre vida.
        </p>
        <button type="button" class="btn btn--secondary" data-travel="terrace" disabled>
          Subir al mirador
        </button>
      </article>
    </section>

    <section
      id="modal-library"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="libraryTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="libraryTitle">Puerta a la biblioteca</h2>
        <p>
          Los ventanales proyectan una estanter√≠a oculta con destellos codificados. Ajusta el
          ambiente del mirador para que la palabra secreta se revele.
        </p>
        <p id="libraryStatus" class="modal__status" role="status">
          Alinea luces, persiana y m√∫sica hasta que el reflejo pronuncie la clave.
        </p>
        <button type="button" class="btn btn--secondary" data-travel="library" disabled>
          Entrar a la biblioteca
        </button>
      </article>
    </section>

    <section
      id="modal-archives"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="archivesTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="archivesTitle">Acceso al archivo</h2>
        <p>
          Una compuerta blindada protege el archivo. Solo reaccionar√° cuando la palabra formada en la
          biblioteca chispee con fuerza.
        </p>
        <p id="archivesStatus" class="modal__status" role="status">
          Ordena las letras luminosas de la biblioteca para que el archivo te reconozca.
        </p>
        <button type="button" class="btn btn--secondary" data-travel="archives" disabled>
          Deslizar hacia el archivo
        </button>
      </article>
    </section>

    <section
      id="modal-labgate"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="labgateTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="labgateTitle">Puerta del laboratorio</h2>
        <p>
          Los expedientes magnetizados vibran sobre sus rieles. Solo la combinaci√≥n dorado y violeta
          desbloquea la cerradura luminosa del laboratorio.
        </p>
        <p id="labgateStatus" class="modal__status" role="status">
          Selecciona los sellos dorado y violeta para que la compuerta se ilumine.
        </p>
        <button type="button" class="btn btn--secondary" data-travel="labgate" disabled>
          Encender el laboratorio
        </button>
      </article>
    </section>

    <section
      id="modal-observatoryGate"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="observatoryGateTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="observatoryGateTitle">Escalera al planetario</h2>
        <p>
          Una espiral met√°lica palpita con energ√≠a. Solo cuando el laboratorio alcance la mezcla
          perfecta permitir√° el ascenso al domo.
        </p>
        <p id="observatoryGateStatus" class="modal__status" role="status">
          Ajusta temperatura y brillo del laboratorio hasta que la escalera se encienda.
        </p>
        <button type="button" class="btn btn--secondary" data-travel="observatoryGate" disabled>
          Subir al planetario
        </button>
      </article>
    </section>

    <section
      id="modal-radioGate"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="radioGateTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="radioGateTitle">Escalera a la cabina</h2>
        <p>
          El domo proyecta destellos hacia la cabina. Solo la figura del cometa liberar√° la compuerta
          y encender√° el descenso.
        </p>
        <p id="radioGateStatus" class="modal__status" role="status">
          Elige la constelaci√≥n del cometa para que la cabina se ilumine.
        </p>
        <button type="button" class="btn btn--secondary" data-travel="radioGate" disabled>
          Bajar a la cabina
        </button>
      </article>
    </section>

    <section
      id="modal-greenhouseGate"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="greenhouseGateTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="greenhouseGateTitle">Acceso al invernadero</h2>
        <p>
          La puerta de cristal responde a ecos de radio procedentes de la cabina. Sintoniza la
          frecuencia exacta para que el roc√≠o desbloquee la entrada.
        </p>
        <p id="greenhouseGateStatus" class="modal__status" role="status">
          Ajusta la frecuencia secreta 98.7 FM para que el invernadero te reciba.
        </p>
        <button type="button" class="btn btn--secondary" data-travel="greenhouseGate" disabled>
          Entrar al invernadero
        </button>
      </article>
    </section>

    <section
      id="modal-loungeGate"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="loungeGateTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="loungeGateTitle">Sal√≥n del festejo</h2>
        <p>
          Entre las plantas se esconde una puerta dorada. Solo el clima perfecto del invernadero
          liberar√° su cerradura.
        </p>
        <p id="loungeGateStatus" class="modal__status" role="status">
          Equilibra temperatura templada y humedad al 70% para acceder al sal√≥n.
        </p>
        <button type="button" class="btn btn--secondary" data-travel="loungeGate" disabled>
          Entrar al sal√≥n
        </button>
      </article>
    </section>

    <section
      id="modal-window"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="windowTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="windowTitle">Ventana nocturna</h2>
        <p>
          La ciudad brilla al fondo. Para distinguir el mensaje reflejado, la habitaci√≥n
          debe quedar en modo <strong>celebraci√≥n nocturna</strong>.
        </p>
        <div class="toggle-grid">
          <button type="button" class="toggle" data-toggle="lights" aria-pressed="false">
            Luces: <span>Encendidas</span>
          </button>
          <button type="button" class="toggle" data-toggle="blind" aria-pressed="false">
            Persiana: <span>Cerrada</span>
          </button>
          <button type="button" class="toggle" data-toggle="music" aria-pressed="false">
            Tocadiscos: <span>Detenido</span>
          </button>
        </div>
        <p class="toggle__hint">
          Configuraci√≥n ideal: luces bajas, persiana entreabierta y m√∫sica girando.
        </p>
        <button type="button" id="toggleCheck" class="btn btn--secondary">Comprobar ambiente</button>
        <p id="windowFeedback" class="modal__feedback" role="status"></p>
      </article>
    </section>

    <section
      id="modal-explore-mirador"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="exploreMiradorTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="exploreMiradorTitle">Horizonte del mirador</h2>
        <p>
          Una brisa nocturna cuela notas musicales y el cristal vibra con reflejos p√∫rpura.
          Desde aqu√≠ se controla el pulso de la ciudad.
        </p>
        <div class="ambient-explore" data-ambient-group>
          <div class="ambient-options">
            <button
              type="button"
              class="ambient-option"
              data-description="La barandilla estelar est√° llena de grabados microsc√≥picos que narran rutas a√©reas. Tocar los s√≠mbolos enciende microleds que dibujan constelaciones sobre la mesa."
            >
              Barandilla estelar
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="La c√∫pula acristalada refleja tus gestos con un retardo m√≠nimo, como si otra versi√≥n de ti ensayara combinaciones de luces al otro lado."
            >
              C√∫pula acristalada
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="Una linterna de se√±ales descansa sobre el banco. Al girarla proyecta haces morados sobre las nubes y hace vibrar un peque√±o timbre oculto."
            >
              Linterna de se√±ales
            </button>
          </div>
          <p
            class="modal__ambient"
            data-ambient-output
            data-default="Selecciona un detalle del mirador para acercarte."
          >
            Selecciona un detalle del mirador para acercarte.
          </p>
        </div>
      </article>
    </section>

    <section
      id="modal-bookshelf"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="bookshelfTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="bookshelfTitle">Estanter√≠a oculta</h2>
        <p>
          Cuatro lomos de libros brillan formando las letras <strong>L</strong>, <strong>O</strong>,
          <strong>V</strong> y <strong>E</strong>. El mensaje del mirador dec√≠a:
          <em>"El amor abre las historias"</em>.
        </p>
        <form id="bookshelfForm" class="option-list">
          <label for="bookshelfAnswer">Escribe la palabra secreta:</label>
          <input id="bookshelfAnswer" name="bookshelfAnswer" type="text" autocomplete="off" required />
          <button type="submit" class="btn btn--secondary">Desbloquear libros</button>
        </form>
        <p id="bookshelfFeedback" class="modal__feedback" role="status"></p>
      </article>
    </section>

    <section
      id="modal-explore-biblioteca"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="exploreBibliotecaTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="exploreBibliotecaTitle">Susurros de la biblioteca</h2>
        <p>
          Estantes, vitrinas y l√°mparas flotantes cuentan historias secretas. La luz cambia con cada
          t√≠tulo pronunciado.
        </p>
        <div class="ambient-explore" data-ambient-group>
          <div class="ambient-options">
            <button
              type="button"
              class="ambient-option"
              data-description="Un globo terr√°queo de cristal gira solo, iluminando ciudades con destellos dorados. Cada giro proyecta coordenadas sobre el techo abovedado."
            >
              Globo terr√°queo
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="El escritorio de traducciones guarda diccionarios intervenidos a mano. Las notas al margen brillan como tinta l√≠quida y hablan sobre amistades en claves morse."
            >
              Escritorio de traducciones
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="Una l√°mpara suspendida late al ritmo de tu respiraci√≥n. Cuando te acercas, proyecta escenas hologr√°ficas de lectores bailando entre pasillos."
            >
              L√°mpara suspendida
            </button>
          </div>
          <p
            class="modal__ambient"
            data-ambient-output
            data-default="Selecciona un rinc√≥n de la biblioteca para descifrarlo."
          >
            Selecciona un rinc√≥n de la biblioteca para descifrarlo.
          </p>
        </div>
      </article>
    </section>

    <section
      id="modal-archive"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="archiveTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="archiveTitle">Archivo clasificado</h2>
        <p>
          Las carpetas est√°n marcadas con sellos de colores. Solo las que tienen el sello dorado y
          violeta deben abrirse. Selecciona las correctas.
        </p>
        <form id="archiveForm" class="option-list option-list--grid">
          <fieldset>
            <legend>¬øQu√© carpetas abrir?</legend>
            <label>
              <input type="checkbox" name="folders" value="gold" /> Expediente dorado
            </label>
            <label>
              <input type="checkbox" name="folders" value="silver" /> Expediente plateado
            </label>
            <label>
              <input type="checkbox" name="folders" value="violet" /> Expediente violeta
            </label>
            <label>
              <input type="checkbox" name="folders" value="blue" /> Expediente azul
            </label>
          </fieldset>
          <button type="submit" class="btn btn--secondary">Validar selecci√≥n</button>
        </form>
        <p id="archiveFeedback" class="modal__feedback" role="status"></p>
      </article>
    </section>

    <section
      id="modal-explore-archivo"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="exploreArchivoTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="exploreArchivoTitle">Secretos del archivo</h2>
        <p>
          Filas met√°licas contienen expedientes que respiran calor y fr√≠o al mismo tiempo. El suelo
          retumba como si debajo corriera un tren fantasma.
        </p>
        <div class="ambient-explore" data-ambient-group>
          <div class="ambient-options">
            <button
              type="button"
              class="ambient-option"
              data-description="Los anaqueles magn√©ticos cambian de tonalidad al detectar tu presencia. Se ordenan solos formando palabras pasajeras que desaparecen al parpadear."
            >
              Anaqueles magn√©ticos
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="Una mesa central exhibe sellos de colores guardados en cajas de cristal. Al acercarte, cada sello emite un murmullo como si enumerara misiones completadas."
            >
              Mesa de sellos
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="Un tubo neum√°tico vibra intermitentemente. Dentro hay mensajes enrollados que describen celebraciones futuras, fechadas en horas que a√∫n no han sucedido."
            >
              Tubo de mensajes
            </button>
          </div>
          <p
            class="modal__ambient"
            data-ambient-output
            data-default="Elige un expediente o artefacto para escucharlo."
          >
            Elige un expediente o artefacto para escucharlo.
          </p>
        </div>
      </article>
    </section>

    <section
      id="modal-laboratory"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="laboratoryTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="laboratoryTitle">Laboratorio lum√≠nico</h2>
        <p>
          Tres l√°mparas de ne√≥n necesitan una temperatura exacta para mezclarse. Allende anot√≥:
          <em>"La luz perfecta se activa a 68 grados"</em>.
        </p>
        <div class="slider-group">
          <label for="labTemperature">Temperatura actual: <span id="labTemperatureValue">50</span>¬∞</label>
          <input id="labTemperature" type="range" min="40" max="90" step="1" value="50" />
        </div>
        <button type="button" id="labCheck" class="btn btn--secondary">Estabilizar mezcla</button>
        <p id="laboratoryFeedback" class="modal__feedback" role="status"></p>
      </article>
    </section>

    <section
      id="modal-explore-laboratorio"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="exploreLaboratorioTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="exploreLaboratorioTitle">Luces del laboratorio</h2>
        <p>
          Tubos fluorescentes, medidores humeantes y botellas suspendidas trabajan como si la noche
          fuera una cient√≠fica aliada.
        </p>
        <div class="ambient-explore" data-ambient-group>
          <div class="ambient-options">
            <button
              type="button"
              class="ambient-option"
              data-description="La mesa de reactivos vibra con burbujas luminosas que laten como luci√©rnagas atrapadas. Si acercas la mano, el brillo se intensifica en busca de calor."
            >
              Mesa de reactivos
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="El osciloscopio proyecta ondas en relieve que se convierten en melod√≠as matem√°ticas. Cada curva parece coincidir con la temperatura ideal del rompecabezas."
            >
              Osciloscopio musical
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="Una balanza gravitatoria mantiene suspendidos objetos imposibles: una pluma, un trozo de meteorito y una llave que gira sobre s√≠ misma sin caer."
            >
              Balanza gravitatoria
            </button>
          </div>
          <p
            class="modal__ambient"
            data-ambient-output
            data-default="Escoge un instrumento del laboratorio para observarlo."
          >
            Escoge un instrumento del laboratorio para observarlo.
          </p>
        </div>
      </article>
    </section>

    <section
      id="modal-observatory"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="observatoryTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="observatoryTitle">Planetario privado</h2>
        <p>
          El proyector muestra tres constelaciones. Recuerda la pista del laboratorio:
          <em>"Busca la figura con forma de cometa"</em>.
        </p>
        <form id="observatoryForm" class="option-list">
          <fieldset>
            <legend>Selecciona la constelaci√≥n correcta</legend>
            <label>
              <input type="radio" name="constellation" value="orion" /> Orion brillante
            </label>
            <label>
              <input type="radio" name="constellation" value="lyra" /> Lira estrellada
            </label>
            <label>
              <input type="radio" name="constellation" value="comet" /> Cometa viajero
            </label>
          </fieldset>
          <button type="submit" class="btn btn--secondary">Proyectar se√±al</button>
        </form>
        <p id="observatoryFeedback" class="modal__feedback" role="status"></p>
      </article>
    </section>

    <section
      id="modal-explore-observatorio"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="exploreObservatorioTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="exploreObservatorioTitle">Constelaciones privadas</h2>
        <p>
          El domo met√°lico amplifica cada respiraci√≥n. Sobre ti flotan estrellas programables que
          responden a palmadas secretas.
        </p>
        <div class="ambient-explore" data-ambient-group>
          <div class="ambient-options">
            <button
              type="button"
              class="ambient-option"
              data-description="Un atril hologr√°fico proyecta cartas celestes que cambian al ritmo de tu pulso. Las l√≠neas se encienden formando firmas luminosas."
            >
              Atril hologr√°fico
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="El sill√≥n de observaci√≥n gravita unos cent√≠metros sobre el suelo. Al sentarte, el respaldo vibra como si alguien ajustara las estrellas desde los altavoces ocultos."
            >
              Sill√≥n flotante
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="Un prisma giratorio de cristal derrama rayos multicolor que se deslizan por el domo. Cada giro acompa√±a un murmullo que suena a radio lejana."
            >
              Prisma giratorio
            </button>
          </div>
          <p
            class="modal__ambient"
            data-ambient-output
            data-default="Se√±ala una constelaci√≥n privada para investigarla."
          >
            Se√±ala una constelaci√≥n privada para investigarla.
          </p>
        </div>
      </article>
    </section>

    <section
      id="modal-radio"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="radioTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="radioTitle">Cabina de radio</h2>
        <p>
          Los diales muestran un brillo especial cuando alcanzan la frecuencia <strong>98.7</strong> FM.
          Ajusta la perilla con precisi√≥n.
        </p>
        <div class="slider-group">
          <label for="radioDial">Frecuencia: <span id="radioDialValue">95.0</span> FM</label>
          <input id="radioDial" type="range" min="88" max="108" step="0.1" value="95" />
        </div>
        <button type="button" id="radioCheck" class="btn btn--secondary">Sintonizar</button>
        <p id="radioFeedback" class="modal__feedback" role="status"></p>
      </article>
    </section>

    <section
      id="modal-explore-radio"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="exploreRadioTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="exploreRadioTitle">Cabina resonante</h2>
        <p>
          Luces √°mbar iluminan paneles de transmisi√≥n. Las ondas sonoras se enredan entre cables
          trenzados como serpientes amistosas.
        </p>
        <div class="ambient-explore" data-ambient-group>
          <div class="ambient-options">
            <button
              type="button"
              class="ambient-option"
              data-description="El mezclador de frecuencias parpadea con barras de colores. Al deslizar un control, escuchas voces antiguas que r√≠en al ritmo de percusiones suaves."
            >
              Mezclador de frecuencias
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="Una antena interior gira lentamente, aline√°ndose con constelaciones invisibles. Cada giro libera chispas silenciosas que flotan unos segundos en el aire."
            >
              Antena interior
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="Un cuaderno de locuciones descansa abierto con frases destacadas en tinta plateada. Al tocarlas, sientes vibrar la madera del atril como si ensayara una transmisi√≥n."
            >
              Cuaderno de locuciones
            </button>
          </div>
          <p
            class="modal__ambient"
            data-ambient-output
            data-default="Escoge un panel de la cabina para acercarte."
          >
            Escoge un panel de la cabina para acercarte.
          </p>
        </div>
      </article>
    </section>

    <section
      id="modal-greenhouse"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="greenhouseTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="greenhouseTitle">Invernadero violeta</h2>
        <p>
          Las plantas reaccionan a un ambiente templado y h√∫medo. Las notas dicen: temperatura entre
          22¬∞ y 24¬∞, humedad al 70%.
        </p>
        <div class="slider-grid">
          <label for="greenhouseTemp">Temperatura: <span id="greenhouseTempValue">24</span>¬∞C</label>
          <input id="greenhouseTemp" type="range" min="18" max="30" step="1" value="24" />
          <label for="greenhouseHumidity">Humedad: <span id="greenhouseHumidityValue">55</span>%</label>
          <input id="greenhouseHumidity" type="range" min="40" max="90" step="1" value="55" />
        </div>
        <button type="button" id="greenhouseCheck" class="btn btn--secondary">Equilibrar ambiente</button>
        <p id="greenhouseFeedback" class="modal__feedback" role="status"></p>
      </article>
    </section>

    <section
      id="modal-explore-greenhouse"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="exploreGreenhouseTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="exploreGreenhouseTitle">Pasarelas del invernadero</h2>
        <p>
          Vapor arom√°tico envuelve flores nocturnas, ventiladores suaves y vitrinas llenas de roc√≠o
          suspendido.
        </p>
        <div class="ambient-explore" data-ambient-group>
          <div class="ambient-options">
            <button
              type="button"
              class="ambient-option"
              data-description="Un estanque circular refleja luces moradas. Cada gota que cae dibuja ondas que forman n√∫meros ef√≠meros sobre la superficie."
            >
              Estanque lum√≠nico
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="El muro de helechos canta un rumor suave. Sus hojas vibran al comp√°s de la humedad y liberan destellos plateados al ser acariciadas."
            >
              Muro de helechos
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="Un banco de madera tibia guarda mensajes grabados con l√°ser. Al sentarte, detecta tu ritmo card√≠aco y ajusta un halo de luz envolvente."
            >
              Banco sensorial
            </button>
          </div>
          <p
            class="modal__ambient"
            data-ambient-output
            data-default="Elige un sendero del invernadero para recorrerlo."
          >
            Elige un sendero del invernadero para recorrerlo.
          </p>
        </div>
      </article>
    </section>

    <section
      id="modal-musicbox"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="musicboxTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="musicboxTitle">Caja musical</h2>
        <p>
          La caja reproduce la melod√≠a favorita de Allende: <em>Do, Mi, Sol, La</em>. Pulsa las notas en
          orden para revelar el √∫ltimo n√∫mero.
        </p>
        <div class="sequence sequence--music" role="group" aria-label="Selecciona la secuencia de notas">
          <button type="button" class="sequence__token" data-note="do">Do</button>
          <button type="button" class="sequence__token" data-note="re">Re</button>
          <button type="button" class="sequence__token" data-note="mi">Mi</button>
          <button type="button" class="sequence__token" data-note="fa">Fa</button>
          <button type="button" class="sequence__token" data-note="sol">Sol</button>
          <button type="button" class="sequence__token" data-note="la">La</button>
        </div>
        <div class="sequence__controls">
          <span id="musicSequenceProgress" aria-live="polite">Notas activas: ‚Äî</span>
          <button type="button" id="musicSequenceReset" class="btn btn--ghost">Reiniciar notas</button>
        </div>
        <p id="musicboxFeedback" class="modal__feedback" role="status"></p>
      </article>
    </section>

    <section
      id="modal-explore-lounge"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="exploreLoungeTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="exploreLoungeTitle">Escena del sal√≥n</h2>
        <p>
          El sal√≥n vibra con m√∫sica suspendida en el aire. Cortinas doradas se mueven sin viento y la
          fiesta parece lista para reanudarse en cualquier momento.
        </p>
        <div class="ambient-explore" data-ambient-group>
          <div class="ambient-options">
            <button
              type="button"
              class="ambient-option"
              data-description="La mesa de banquetes luce copas que brillan desde dentro. Cada sorbo imaginario despierta aromas de frutas ex√≥ticas y risas lejanas."
            >
              Mesa de banquetes
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="Un proyector vintage lanza sombras danzantes sobre las paredes. Las siluetas repiten coreograf√≠as y de pronto se√±alan la puerta final."
            >
              Proyector de sombras
            </button>
            <button
              type="button"
              class="ambient-option"
              data-description="El balc√≥n interior abre la vista a la ciudad. Desde all√≠ llega un eco de celebraci√≥n que promete intensificarse cuando descifres el √∫ltimo n√∫mero."
            >
              Balc√≥n interior
            </button>
          </div>
          <p
            class="modal__ambient"
            data-ambient-output
            data-default="Explora un rinc√≥n del sal√≥n para avivar la celebraci√≥n."
          >
            Explora un rinc√≥n del sal√≥n para avivar la celebraci√≥n.
          </p>
        </div>
      </article>
    </section>

    <section
      id="modal-door"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="doorTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="doorTitle">Puerta blindada</h2>
        <p id="doorStatus">
          Todav√≠a faltan n√∫meros. Explora todas las habitaciones para encontrar las diez cifras.
        </p>
        <form id="doorForm" class="door-form">
          <label for="doorCode">Introduce el c√≥digo de diez cifras</label>
          <input
            id="doorCode"
            name="doorCode"
            type="tel"
            inputmode="numeric"
            pattern="[0-9]*"
            maxlength="10"
            autocomplete="one-time-code"
            placeholder="_ _ _ _ _ _ _ _ _ _"
            required
          />
          <button type="submit" class="btn btn--primary">Abrir puerta</button>
        </form>
        <p id="doorFeedback" class="modal__feedback" role="status"></p>
      </article>
    </section>

    <section
      id="modal-victory"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="victoryTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content modal__content--victory">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="victoryTitle">¬°Puerta abierta!</h2>
        <p>
          La cerradura reconoce el c√≥digo y se abre. Detr√°s hay globos, m√∫sica y una carta:
          "Feliz vuelta al sol #29. Esto apenas empieza".
        </p>
        <ul class="victory-list">
          <li>üéÄ Pase VIP para marat√≥n de Hello Kitty.</li>
          <li>üó∫Ô∏è Coordenadas reservadas para el pr√≥ximo viaje juntos.</li>
          <li>‚òï Caf√©s personalizados ilimitados durante el mes.</li>
        </ul>
        <button type="button" id="replay" class="btn btn--secondary">Volver a explorar</button>
      </article>
    </section>
  </body>
</html>
