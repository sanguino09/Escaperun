<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Habitaci√≥n 29 ¬∑ Escape Room</title>
    <meta
      name="description"
      content="Explora una habitaci√≥n interactiva tocando cada rinc√≥n para descubrir los c√≥digos secretos del escape room."
    />
    <meta name="theme-color" content="#201637" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Habitaci√≥n 29" />
    <link rel="manifest" href="manifest.webmanifest" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%20128%20128%27%3E%3Crect%20width%3D%27128%27%20height%3D%27128%27%20rx%3D%2726%27%20fill%3D%27%23201637%27/%3E%3Cpath%20d%3D%27M64%2098c-1.6%200-3.2-.5-4.5-1.5-15.4-11.4-25.5-20.3-31.2-27.7-5.4-7-7.8-13.2-7.8-20.4C20.5%2034.6%2030%2026.2%2041.8%2026.2c8%200%2014.2%203.5%2018%209.9%203.8-6.4%2010-9.9%2018-9.9C89.6%2026.2%2099%2034.6%2099%2048.4c0%207.3-2.4%2013.5-7.8%2020.4-5.7%207.4-15.9%2016.3-31.2%2027.7-1.3%201-2.9%201.5-4.5%201.5z%27%20fill%3D%27%23f7d27d%27/%3E%3Cpath%20d%3D%27M50%2070h6l3-13%203.4%2023%204.2-17.6%202.7%207.6h6.2%27%20fill%3D%27none%27%20stroke%3D%27%23fff3d6%27%20stroke-width%3D%275%27%20stroke-linecap%3D%27round%27%20stroke-linejoin%3D%27round%27/%3E%3C/svg%3E"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@500;700&family=Nunito:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <script defer src="app.js"></script>
  </head>
  <body>
    <div class="intro-screen" id="introScreen">
      <div class="intro-screen__content">
        <p class="intro-screen__tag">Escape room t√°ctil</p>
        <h1>Habitaci√≥n 29</h1>
        <p>
          Est√°s dentro del refugio secreto de Allende. Todo parece quieto, pero cada
          objeto guarda un n√∫mero. Encu√©ntralos y podr√°s salir a celebrar.
        </p>
        <button id="enterRoom" class="btn btn--primary">Entrar en la habitaci√≥n</button>
        <p class="intro-screen__hint">Toca cualquier rinc√≥n que parezca sospechoso.</p>
      </div>
    </div>

    <main id="game" class="game" aria-hidden="true" data-started="false">
      <aside class="hud" aria-label="Panel de progreso">
        <h2>Progreso</h2>
        <ul id="clueList" class="clue-list">
          <li data-clue="diary">
            <span class="clue-list__icon" aria-hidden="true">üìì</span>
            <span class="clue-list__name">Cuaderno de viaje</span>
            <span class="clue-list__number" data-number="diary">_</span>
          </li>
          <li data-clue="chest">
            <span class="clue-list__icon" aria-hidden="true">üß≥</span>
            <span class="clue-list__name">Ba√∫l secreto</span>
            <span class="clue-list__number" data-number="chest">_</span>
          </li>
          <li data-clue="window">
            <span class="clue-list__icon" aria-hidden="true">üåÜ</span>
            <span class="clue-list__name">Ventana nocturna</span>
            <span class="clue-list__number" data-number="window">_</span>
          </li>
        </ul>
        <div class="hud__code" aria-live="polite">
          C√≥digo final:
          <span data-slot="0">_</span>
          <span data-slot="1">_</span>
          <span data-slot="2">_</span>
        </div>
        <div class="hud__notes">
          <h3>Notas</h3>
          <p id="hudNote">Necesitas encontrar tres n√∫meros antes de abrir la puerta.</p>
        </div>
      </aside>

      <section class="room" id="roomStage" aria-label="Habitaci√≥n de escape" data-room="estudio">
        <div class="room__backdrop" role="presentation"></div>
        <button
          type="button"
          class="hotspot hotspot--desk"
          data-target="diary"
          data-room="estudio"
          aria-label="Revisar el cuaderno sobre el escritorio"
        >
          Cuaderno
        </button>
        <button
          type="button"
          class="hotspot hotspot--chest"
          data-target="chest"
          data-room="vestidor"
          aria-label="Abrir el ba√∫l junto a la cama"
        >
          Ba√∫l
        </button>
        <button
          type="button"
          class="hotspot hotspot--window"
          data-target="window"
          data-room="mirador"
          aria-label="Mirar por la ventana"
        >
          Ventana
        </button>
        <button
          type="button"
          class="hotspot hotspot--door"
          data-target="door"
          data-room="mirador"
          aria-label="Intentar abrir la puerta"
        >
          Puerta
        </button>
        <button
          type="button"
          class="hotspot hotspot--hall"
          data-target="gallery"
          data-room="estudio"
          aria-label="Cruzar el pasillo lateral"
        >
          Pasillo
        </button>
        <button
          type="button"
          class="hotspot hotspot--terrace"
          data-target="terrace"
          data-room="vestidor"
          aria-label="Subir al mirador"
        >
          Mirador
        </button>
      </section>
    </main>

    <section
      id="modal-diary"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="diaryTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="diaryTitle">Cuaderno de viaje</h2>
        <p>
          Las p√°ginas est√°n llenas de adhesivos y boletos de avi√≥n. Una nota dice:
          <em>"Mi primer destino siempre guarda la llave del resto"</em>.
        </p>
        <form id="diaryForm" class="option-list">
          <fieldset>
            <legend>¬øQu√© lugar abri√≥ todas las aventuras?</legend>
            <label>
              <input type="radio" name="diaryAnswer" value="paris" />
              Par√≠s con su torre iluminada.
            </label>
            <label>
              <input type="radio" name="diaryAnswer" value="tokio" />
              Tokio y sus neones interminables.
            </label>
            <label>
              <input type="radio" name="diaryAnswer" value="ny" />
              Nueva York desde lo alto del Empire.
            </label>
          </fieldset>
          <button type="submit" class="btn btn--secondary">Desbloquear nota</button>
        </form>
        <p id="diaryFeedback" class="modal__feedback" role="status"></p>
      </article>
    </section>

    <section
      id="modal-chest"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="chestTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="chestTitle">Ba√∫l secreto</h2>
        <p>
          Dentro hay compartimentos con figuras magn√©ticas. El mensaje dice:
          <em>"Activa la secuencia favorita de Allende"</em>.
        </p>
        <div class="sequence" role="group" aria-label="Selecciona la secuencia correcta">
          <button type="button" class="sequence__token" data-symbol="cat">üê±</button>
          <button type="button" class="sequence__token" data-symbol="plane">‚úàÔ∏è</button>
          <button type="button" class="sequence__token" data-symbol="coffee">‚òï</button>
          <button type="button" class="sequence__token" data-symbol="camera">üì∑</button>
        </div>
        <p class="sequence__hint">Pulsa los tres iconos en orden. Puedes reiniciar cuando quieras.</p>
        <div class="sequence__controls">
          <span id="sequenceProgress" aria-live="polite">Orden actual: ‚Äî</span>
          <button type="button" id="sequenceReset" class="btn btn--ghost">Reiniciar</button>
        </div>
        <p id="chestFeedback" class="modal__feedback" role="status"></p>
      </article>
    </section>

    <section
      id="modal-gallery"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="galleryTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="galleryTitle">Pasillo lateral</h2>
        <p>
          Una puerta corredera conduce al vestidor de mapas. Parece necesitar la pista correcta
          para deslizarse.
        </p>
        <p id="galleryStatus" class="modal__status" role="status">
          Primero descifra el cuaderno para recordar la palabra clave.
        </p>
        <button type="button" class="btn btn--secondary" data-travel="gallery" disabled>
          Entrar al vestidor
        </button>
      </article>
    </section>

    <section
      id="modal-terrace"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="terraceTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="terraceTitle">Escalera al mirador</h2>
        <p>
          El vestidor se abre a una escalera iluminada por luces ne√≥n. Un sensor detecta la
          secuencia correcta del ba√∫l antes de dejarte subir.
        </p>
        <p id="terraceStatus" class="modal__status" role="status">
          Completa la secuencia de imanes para activar el mecanismo.
        </p>
        <button type="button" class="btn btn--secondary" data-travel="terrace" disabled>
          Subir al mirador
        </button>
      </article>
    </section>

    <section
      id="modal-window"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="windowTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="windowTitle">Ventana nocturna</h2>
        <p>
          La ciudad brilla al fondo. Para distinguir el mensaje reflejado, la habitaci√≥n
          debe quedar en modo <strong>celebraci√≥n nocturna</strong>.
        </p>
        <div class="toggle-grid">
          <button type="button" class="toggle" data-toggle="lights" aria-pressed="false">
            Luces: <span>Encendidas</span>
          </button>
          <button type="button" class="toggle" data-toggle="blind" aria-pressed="false">
            Persiana: <span>Cerrada</span>
          </button>
          <button type="button" class="toggle" data-toggle="music" aria-pressed="false">
            Tocadiscos: <span>Detenido</span>
          </button>
        </div>
        <p class="toggle__hint">
          Configuraci√≥n ideal: luces bajas, persiana entreabierta y m√∫sica girando.
        </p>
        <button type="button" id="toggleCheck" class="btn btn--secondary">Comprobar ambiente</button>
        <p id="windowFeedback" class="modal__feedback" role="status"></p>
      </article>
    </section>

    <section
      id="modal-door"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="doorTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="doorTitle">Puerta blindada</h2>
        <p id="doorStatus">
          Todav√≠a faltan n√∫meros. Explora la habitaci√≥n hasta encontrar los tres c√≥digos.
        </p>
        <form id="doorForm" class="door-form">
          <label for="doorCode">Introduce el c√≥digo de tres cifras</label>
          <input
            id="doorCode"
            name="doorCode"
            type="tel"
            inputmode="numeric"
            pattern="[0-9]*"
            maxlength="3"
            autocomplete="one-time-code"
            placeholder="_ _ _"
            required
          />
          <button type="submit" class="btn btn--primary">Abrir puerta</button>
        </form>
        <p id="doorFeedback" class="modal__feedback" role="status"></p>
      </article>
    </section>

    <section
      id="modal-victory"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="victoryTitle"
    >
      <div class="modal__overlay" data-action="close"></div>
      <article class="modal__content modal__content--victory">
        <button type="button" class="modal__close" data-action="close" aria-label="Cerrar">√ó</button>
        <h2 id="victoryTitle">¬°Puerta abierta!</h2>
        <p>
          La cerradura reconoce el c√≥digo y se abre. Detr√°s hay globos, m√∫sica y una carta:
          "Feliz vuelta al sol #29. Esto apenas empieza".
        </p>
        <ul class="victory-list">
          <li>üéÄ Pase VIP para marat√≥n de Hello Kitty.</li>
          <li>üó∫Ô∏è Coordenadas reservadas para el pr√≥ximo viaje juntos.</li>
          <li>‚òï Caf√©s personalizados ilimitados durante el mes.</li>
        </ul>
        <button type="button" id="replay" class="btn btn--secondary">Volver a explorar</button>
      </article>
    </section>
  </body>
</html>
